<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta name="referrer" content="no-referrer"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>论文阅读——Factor Graphs for Robust GNSS | 汐汐的成长之路</title><meta name="author" content="汐汐"><meta name="copyright" content="汐汐"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Review of Factor Graphs for Robust GNSS  Cite : Das S, Watson R, Gross J. Review of factor graphs for robust GNSS applications. arxiv preprint arxiv:2112.07794. 2021 Dec 14.  本文是该文的翻译版 适合大概的因子图综述阅读 什么">
<meta property="og:type" content="article">
<meta property="og:title" content="论文阅读——Factor Graphs for Robust GNSS">
<meta property="og:url" content="https://www.lling.online/2024/05/18/%E8%AE%BA%E6%96%87-Review-of-Factor-Graphs-for-Robust-GNSS/index.html">
<meta property="og:site_name" content="汐汐的成长之路">
<meta property="og:description" content="Review of Factor Graphs for Robust GNSS  Cite : Das S, Watson R, Gross J. Review of factor graphs for robust GNSS applications. arxiv preprint arxiv:2112.07794. 2021 Dec 14.  本文是该文的翻译版 适合大概的因子图综述阅读 什么">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.lling.online/img/top-img/paper%20reading.png">
<meta property="article:published_time" content="2024-05-18T08:17:52.000Z">
<meta property="article:modified_time" content="2024-05-18T10:11:28.354Z">
<meta property="article:author" content="汐汐">
<meta property="article:tag" content="因子图">
<meta property="article:tag" content="综述">
<meta property="article:tag" content="鲁棒性">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.lling.online/img/top-img/paper%20reading.png"><link rel="shortcut icon" href="/img/xix.png"><link rel="canonical" href="https://www.lling.online/2024/05/18/%E8%AE%BA%E6%96%87-Review-of-Factor-Graphs-for-Robust-GNSS/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?e588f3c6266a7f7c4936775cbf8be029";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="/styles/font.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '论文阅读——Factor Graphs for Robust GNSS',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-05-18 18:11:28'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/styles/main.css"><script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script><link rel="stylesheet" href="/styles/icon.css"><link rel="stylesheet" href="/styles/font.css"><meta name="generator" content="Hexo 7.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/miao.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/top-img/paper%20reading.png')"><nav id="nav"><span id="blog-info"><a href="/" title="汐汐的成长之路"><img class="site-icon" src="/img/miao.png"/><span class="site-name">汐汐的成长之路</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">论文阅读——Factor Graphs for Robust GNSS</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-18T08:17:52.000Z" title="发表于 2024-05-18 16:17:52">2024-05-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-05-18T10:11:28.354Z" title="更新于 2024-05-18 18:11:28">2024-05-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/">论文阅读</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>18分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="论文阅读——Factor Graphs for Robust GNSS"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="review-of-factor-graphs-for-robust-gnss">Review of Factor Graphs
for Robust GNSS</h1>
<blockquote>
<p>Cite : Das S, Watson R, Gross J. Review of factor graphs for robust
GNSS applications. arxiv preprint arxiv:2112.07794. 2021 Dec 14.</p>
</blockquote>
<p>本文是该文的翻译版 适合大概的因子图综述阅读</p>
<h2 id="什么是因子图">什么是因子图</h2>
<p>概率建模是任何一种估计问题的一个非常重要的工具。这导致了图形模型[1]的发展，该模型使用图中的顶点对系统的已知变量和未知变量进行建模，并定义它们之间的边来表示它们之间的关系。由于系统建模中固有的不确定性，这些关系是概率性的。</p>
<p>一个因子图连接了这些图形化的许多类型的模型，如马尔可夫随机场，贝叶斯网络，坦纳图[2]。<strong>因子图的主要动机是将许多变量的全局函数表示为具有变量的较小子集的局部函数的乘积。因子图不是一种方法，而是一种使用其局部性结构建模任何系统的框架，即每个变量只依赖于其他几个局部变量，并且独立于其他局部变量。</strong>
正如在[3]中所解释的那样，正是这种局部性特性使它在建模各种问题中非常有用，包括映射、视觉惯性测程法、运动规划、轨迹估计和深度学习。<strong>因子图被定义为一个二部图有两种类型的顶点，一个是变量（即状态向量）顶点是估计和另一个是因子顶点编码约束（例如，一组GNSS观察）应用于变量的顶点。一条边只能存在于因子顶点和变量顶点之间。因子顶点表示局部函数，它依赖于与它的变量顶点共享它的边。</strong></p>
<p>机器人技术中一个常见的估计问题是利用因子图框架来估计未知机器人姿态以及根据问题的其他参数。这是通过求解最大后验（MAP）问题来实现的，该问题使状态和测量值之间的概率约束因子的乘积最大化。
[4]给出了一个严格的数学描述，如何解决这个最大化问题在机器人感知领域。</p>
<p>因子图已被视为解决估计问题的替代框架，并已被证明是非常有效的特定应用，在克隆同步定位和映射（SLAM）。由于该方法的灵活性和通过提供GTSAM
[5]、g2o [6]、Ceres
[7]等开源图优化库而易于实现，该框架得到了广泛的使用。<strong>虽然因子图框架已被证明对许多应用程序是有益的，但应该注意的是，框架可以等同于（即，它是一种遗传化）现有的状态估计实现（例如，卡尔曼滤波器和它的许多变体）</strong>。
为了开始这个比较，我们将注意到因子图最终编码了一个目标函数，该函数通过非线性优化程序（例如，高斯-牛顿，莱夫-恩伯格-马夸特）重复重新线性化来求解。先前的工作已经证明，对扩展卡尔曼滤波的测量更新迭代和迭代之间的系统模型等价于高斯-牛顿优化[8]。
结果表明，<strong>在一定的约束条件下，批处理模式下的因子图等价于反向平滑扩展卡尔曼滤波器（EKF）[9]，使系统和观测模型重新线性化并迭代。</strong></p>
<h2 id="使用因子图有什么优势">使用因子图有什么优势</h2>
<p>因子图优化比标准的非迭代卡尔曼滤波器具有一些优势，对某些应用具有一定的价值。</p>
<p>首先，像任何优化问题一样，<strong>它使用多次迭代来最小化成本</strong>，而不是像标准卡尔曼滤波器那样对每个状态只进行一次迭代。其次，它还将标准卡尔曼滤波器的<strong>非线性测量模型线性化</strong>，而不是用标准卡尔曼滤波器进行的单线性化。因子图也被证明可以<strong>更好地利用过去和当前时代之间的时间相关性，这被归因于估计方法的批处理性质</strong>。特别是，当在批处理模式下操作时，一个因子图将<strong>相当于一个前向滤波器和向后平滑器</strong>。</p>
<p>对于GNSS/INS应用，这些好处得到了[10]实验结果的支持，其中因子图已被证明在城市环境中比EKF表现更好。随着较长时间内新测量值的积累，<strong>批估计可能会失去实时性能</strong>。<strong>滑动窗口方法</strong>也可以使用类似于[11]来减轻计算成本。窗口大小已被发现对良好的优化结果至关重要，并可取决于环境条件[10]。<strong>因子图通过利用雅可比矩阵和信息矩阵的稀疏性来实现有效的计算。这有助于快速的矩阵分解和反替换</strong>。</p>
<p>直接从图形中删除早期的姿态可能会导致信息丢失。这可以避免使用平方根信息形式中的边缘化来删除变量从贝叶斯网络从因子图使用消除算法。
<strong>由于图中的稀疏性，增量QR分解也可以有效地实现</strong>[5]。除了固定滞后平滑之外，isam2公式[12]在添加一个新的约束时，通过将因子图转换为贝叶斯树[13]来实现实时性能。<strong>对于高度非线性的测量模型，这是一种更精确的增量和平滑的方法</strong>。贝叶斯树的顶点代表了在因子分解过程中由因子图得到的贝叶斯网中的团系。<strong>只有包含在新约束中的状态和贝叶斯树中的状态以及它们在贝叶斯树中的前一个状态需要更新</strong>。Watson和Gross
[14]在GNSS因子图中使用了isam2，显示出比传统的EKF-精确点定位（PPP）方法有更好的定位性能。Wen等人[15]将因子图优化应用于GNSS和GNSS-实时运动学（RTK）定位问题，显示出比EKF更好的性能。</p>
<h2 id="因子图如何运用于gnss">因子图如何运用于GNSS</h2>
<p>在[14]中详细描述了用GNSS观察结果产生的因素。<strong>在GNSS因子图中通常估计的状态是重新收发器的位置、对流层延迟、载波相位偏置和接收机时钟偏置。</strong>图1提供了GNSS因子图的可视化表示，其中ψ表示状态和测量值之间可能存在的任何概率约束。</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/xi-song/blog-image/202405181544533.png" alt="image-20240518154433289">
<figcaption aria-hidden="true">image-20240518154433289</figcaption>
</figure>
<p>在这个特定的实现中，ψ是对每个状态的先验信念，这取决于特定的数据集和环境心理特征。<span class="math inline">\(ψ^p\)</span>是<strong>沿轨迹的两个连续状态之间的运动约束</strong>，例如，可以合并来自惯性测量单元（IMU）或车轮里程表的运动数据。在GNSS/IMU导航中使用的<span class="math inline">\(ψ^b\)</span>的一个常见例子是使用IMU预积分[16]来计算两个因子图位置之间的位移，它们之间有多个IMU测量值的积分。最后，在一个状态和从该状态感知到的测量值之间的<span class="math inline">\(ψ^m\)</span>测量约束，例如GNSS伪距或载波相位测量值。为了找到GNSS因子图的MAP估计值，<strong>我们可以找到使因子乘积最大化的状态集。</strong>
然而，在实践中，这个优化问题可以大大简化采用高斯噪声假设，使问题的转换最大化因素的乘积非线性最小二乘问题的每个组件是一个马氏成本，代表归一化残差的平方和，如等式提供1，其中f（∗）在不同时期的状态映射和h（∗）之间的映射是从状态空间到观测空间的映射。</p>
<p><span class="math inline">\(\begin{aligned}\hat{X}&amp;=\underset{x}{\operatorname*{argmin}}\left[\sum_{i=1}^I\left\|\psi_i^p\right\|_\Sigma^2+\sum_{j=1}^J\left\|\psi_j^b\right\|_\Lambda^2+\sum_{k=1}^K\left\|\psi_k^m\right\|_\Xi^2\right]\\&amp;=\underset{x}{\operatorname*{argmin}}\left[\sum_{i=1}^I\left\|x_0-x_i\right\|_\Sigma^2+\sum_{j=1}^J\left\|x_j-f_j(x_{j-1})\right\|_\Lambda^2+\sum_{k=1}^K\left\|y_k-h_k\left(x_k\right)\right\|_\Xi^2\right]\\&amp;&amp;\text{(1)}\end{aligned}\)</span></p>
<h2 id="在gnss中使用因子图进行鲁棒估计的方法是什么">在GNSS中使用因子图进行鲁棒估计的方法是什么？</h2>
<p>如前所述，因子图框架也便于添加现有的和新的鲁棒估计方法，有助于减少欺骗攻击时的定位误差或多路径或大气效应的大噪声。下面的讨论列举了一些应用于GNSS的健壮方法。
桑德豪夫等人[17]定义了开关约束（SC），这是一种提升优化[18]方法，定义了观察加权函数<span class="math inline">\(Ψ（）\)</span>，它是开关变量的函数，与感兴趣的状态参数一起估计。SC方法最初是用于SLAM中的鲁棒环闭合检测的，然后扩展到GNSS用于多路径缓解[19]。当使用开关约束时，伪距因子代价函数表示为预测和实际测量之间的马氏成本的比例版本。
<span class="math display">\[
\left\|\mathbf{e}_k^\mathrm{switch}\right\|_{\boldsymbol{\Sigma}_k}^2=\left\|\Psi\left(s_k\right)\cdot\left(y_k-h_k(x_k)\right)\right\|_{\boldsymbol{\Sigma}_k}^2
\]</span> 其中，函数 <span class="math inline">\(Ψ\)</span>
是开关变量的线性函数。为这些开关变量添加先验因子，以阻止优化使所有<span class="math inline">\(s_k\)</span>变成零。还可以添加一个过渡因子来模拟<span class="math inline">\(s_{k−1}\)</span>和在下一个时间步观测到的同一卫星之间的变化。这些开关功能有助于自动减轻错误测量（例如，可疑的多路径测量），并被认为比计算昂贵的射线追踪方法[19]表现更好。
在[20]中推导出了SC的一个扩展，称为<strong>动态协方差尺度</strong>（DCS），其中开关变量从优化方法中提取，并使用残差、电流测量不确定度和先验开关不确定度分别进行计算。在计算<span class="math inline">\(s_k\)</span>后，与GNSS观测因子相关的信息矩阵用$
Ψ(s_k)^2$进行缩放。
<strong>最大混合（MM）</strong>[21]也使用高斯混合模型（GMM）来解决假循环闭包，但不是使用多模态不确定模型时不适合最大似然的和算子，目标函数转换为使用最大算子，如等式所示
3 <span class="math display">\[
p\left(y_i\mid x\right)=\max_kw_kN\left(\mu_k,\Lambda_k^{-1}\right)
\]</span>
SC、DSC和MM的好处已经在[22,23]中评估了具有真实世界数据的GNSS因子图应用。这两项研究都表明，在对退化的GNSS观测值进行优化时，通过使用鲁棒估计技术，可以实现实质性的定位改进。</p>
<p>为了扩展最大混合工作<strong>，Watson等人[24]提出基于观测残差的聚类在运行时学习GMM</strong>。
最初，这项工作是是在一个批处理框架中实现的.然而，后来通过一种逐步合并gmm的有效方法，它被扩展到增量[25]工作，通过一种有效的方法来逐步合并gmm。</p>
<p>m-估计器[26]最近也在GNSS框架中以批处理形式的[27]进行了测试，并发现它比非鲁棒估计器性能更好。m-估计器假设有一个不同于平方损失函数的损失函数。
平方损失函数对离群值高度敏感，因为它在较大的残差值下积极增长。因此，引入了一组损失函数，它们的增长侵略性小于平方损失函数。Huber成本函数[28]，如等式中提供的4就是这样一个函数。
<span class="math display">\[
\rho(z)=\begin{cases}z^2/2&amp;|z|\leq\Delta\\\Delta|z|-\Delta^2/2&amp;|z|&gt;\Delta\end{cases}
\]</span> 当目标函数被修改为利用m-估计量时，优化问题的形式如等式中所示
5. <span class="math display">\[
\hat{X}=\arg\min_x\sum_i\rho\left(\frac{r_i(x)}\sigma\right)\quad(5)
\]</span> 式中，<span class="math inline">\(r_i (x)\)</span>
为每次测量的残差，<span class="math inline">\(σ\)</span>
为尺度参数。</p>
<p>增加∆参数会使该函数更接近平方损失函数。方程5可以用加权最小二乘法迭代求解方法[27,26]。选择一个合适的∆参数并不简单，因为它依赖于测量噪声的统计量。阿加门诺尼等人[29]利用这样一个事实，即一些m估计量，如胡贝尔，柯西，拉普拉斯有一个对应的椭圆分布来估计期望最大化（EM）框架下的∆和状态。Barron
[30]联合优化了计算机视觉应用程序的状态和参数。因子图在m估计器应用中提供了更大的灵活性，<strong>因为它不仅可以帮助降低当前测量的权重，而且还可以改变过去测量的权重</strong>。如果后来发现一些过去的测量值，那么它是一个异常值，而在卡尔曼滤波器中，过去的测量值的贡献不能以实时的方式改变。大多数图形操作时间化库还内置了使用健壮的成本函数的功能，这也很有帮助。</p>
<p>最后，Yang等人[31]导出的鲁棒估计技术结合了计算机视觉的两个著名思想，黑-朗加拉扬<strong>对偶性[32]和分级非凸性[33]，利用鲁棒代价函数迭代解决点云重构问题。</strong>根据黑-朗加拉扬对偶性，方程5可以重写为
<span class="math display">\[
\hat{X},\mathbf{w}=\underset{x,w_i\in[0,1]}{\operatorname*{\arg\min}}\sum_i\left[w_ir_i^2\left(x\right)+\Phi_\rho\left(w_i\right)\right],
\]</span> 其中 <span class="math inline">\(w_i\)</span>
是该测量的权重，<span class="math inline">\(Φ_ρ\)</span>
是一个惩罚项，它取决于权重和稳健代价ρ。分级非凸性（GNC）是一种不面临局部极小值问题的非凸函数f最小化的方法。其思想是代替函数用<span class="math inline">\(f_µ\)</span> 替代f，<span class="math inline">\(f_µ\)</span>的凸性由参数µ控制。优化从<span class="math inline">\(f_µ\)</span>和<span class="math inline">\(µ\)</span>的凸形式开始，迭代地改变，使非凸性增加。[31]将这两种方法结合起来，解决了方程5中的两个问题，</p>
<p>1)在优化鲁棒代价函数的同时避免局部最小值</p>
<p>2)将方程5转换为一个总是更容易求解的加权最小二乘问题。这个问题与GNSS的相似性对读者来说应该是显而易见的。[34]显示了在GNSS因子图中应用这种稳健估计技术在减轻城市峡谷多路径效应中的重要性。大多数这些鲁棒估计方法的批处理性质使它适合用于因子图，而不是EKF。</p>
<h2 id="因子图对gnss和无线电导航社区的潜在用途是什么">因子图对GNSS和无线电导航社区的潜在用途是什么？</h2>
<p>EKF一直是基于GNSS的状态估计的首选，因为其简单性、计算效率，以及GNSS观测模型可以用线性近似很好地建模，并且经常通过高斯误差进行很好的描述。尽管如此，但在某些情况下，无线电导航社区可能可以受益于因子图优化。</p>
<p>首先，最近的工作强调了机会信号（SOP）在无线电导航应用中的潜在用途和好处。SOP可能包括作为手机信号的[35,36,37]和近地轨道卫星。<strong>sop的使用通常包括对解决一个未知的或非常不确定的发射机位置和时钟偏移量的需要。</strong>因此，这类问题与SLAM有许多相似之处，因此可以从使用因子图中获得类似的好处，如基于视觉或激光雷达的姿态图SLAM所公认的那样。</p>
<p>其次，正如在GNSS的背景下所讨论的，许多鲁棒估计技术已经被开发出来用于因子图。<strong>对于使用容易出现多路径错误的GNSS城市环境，使用这些鲁棒因子图可能是有益的。</strong>例如，谷歌智能手机解密器挑战的获胜解决方案，包括收集到不同环境设置的各种数据集，确实是一个因子图实现[38]。</p>
<p>最后，因子图的采用可能是有益的，因为因子图框架已经成为机器人和自治社区中的标准状态估计范式（即，除了GNSS之外，几乎所有的传感器模态都利用并显示了因子图框架的好处）。采用GNSS因子图可以使GNSS和其他传感器模式之间更无缝集成，多个信息源的集成是任何关键导航系统的关键。</p>
<h2 id="其他相关问题">其他相关问题</h2>
<h3 id="关于本文提出的反向平滑ekf-9">关于本文提出的反向平滑EKF [9]</h3>
<blockquote>
<p>OURNAL OFGUIDANCE, CONTROL,ANDDYNAMICS Vol. 28, No. 5,
September–October 2005</p>
</blockquote>
<p>推广了迭代扩展卡尔曼滤波器的原理，提出了一种新的在估计问题存在严重非线性时具有优越性能的滤波器。当非噪声可能会显著降低其他滤波器的精度或收敛可靠性时，新的滤波器是有用的。该新的滤波器利用迭代数值技术解决了当前和过去样本区间的非线性平滑问题。这种方法保留了在感兴趣的阶段之前的固定数量的阶段的非线性，并以一种近似的方式处理来自早期阶段的信息。该算法已经在一个困难的航天器姿态估计问题上进行了仿真测试，该问题包括少于三个轴的感知和显著的动态模型不确定性。该滤波器通过同时估计惯性矩参数来补偿这种不确定性。对于初始姿态或姿态率误差较大的估计问题，该滤波器和无迹卡尔曼滤波器具有更好的收敛可靠性和精度。</p>
<p>反向平滑扩展卡尔曼滤波器（BSEKF）比其他过滤器更直接地处理更多的非线性。EKF使用了非线性动力学和测量函数的一项或两项泰勒级数近似。展开是对后验或先验均值展开的，以可用的为准。利用这些展开式和线性卡尔曼方程动态传播，更新状态状态及其估计误差协方差。1
IEKF试图通过改变一个关于一个基于先前线性化的后验状态估计来改进其测量方程的线性近似。在IEKF的一个选项中，可以实现几种重新线性化。1
UKF通过非线性动力学和测度函数传播点的分布。这些点被称为西格玛点，它们被用来估计非线性函数输出分布的高斯近似值的均值和协方差。如果你要注意如何选择UKF的西格玛点，那么它将保留二阶非线性效应，这些效应被EKF，2,3的某些细节所遗漏，这就是为什么与许多EKF相比，它可以提高收敛性和准确性。</p>
<p>BSEKF改进的改进来自于它处理现在和过去的动力学和测量函数的非线性的方法。该方法是对IEKF原理的一种扩展。<strong>其想法是重新线化化当前和过去的测量函数，以及当前和过去的动态函数，以改进对当前和过去状态和过程噪声向量的猜测。</strong>在一个结束的时间间隔内，通过迭代的非线性平滑来选择适当的再线性化点在当前的采样时间内。这个过程产生了一个状态估计算法，该算法处理多个阶段上的所有非线性，而没有任何近似。</p>
<p>BSEKF在本质上与参考文献中描述的过滤器参考文献4.
目前的公式的主要区别是，它适用于一般的离散时间问题，而参考文献4的滤波器直接工作于为特定应用程序导出的采样数据连续时间问题。目前的离散时间形式简化了数学如下：它既消除了指定状态向量的确定性和非确定性部分的需要，也消除了开发不包括过程噪声向量的联合概率分布的需要。</p>
<p><strong>BSEKF可以被归类为一种特殊的因果批处理过滤器。一个仔细的研究人员可以从文献中关于批过滤的各种想法中综合BSEKF方法，</strong>
但没有一个参考文献将所有必要的组件组合在一个地方。
在参考文献5中，<strong>使用移动窗口批处理过滤器nonlin-
ear高斯-牛顿更新是提到执行因果非线性滤波，但公式不包括过程噪声，也没有解释重要细节如何最好地将数据从批处理窗口的影响</strong>。在参考文献6提到了一个具有类似缺点的移动窗口批处理过滤器，但给出的细节更少。在参考文献7定义了一种解决排除过程噪声的离散时间批估计问题的方法，但没有提到移动窗口实现作为因果非线性滤波的手段。在参考文献1，概述了非线性最大后验（MAP）平滑及其与动态规划的关系，但没有给出算法的解，也没有讨论用于因果滤波的移动窗口实现。</p>
<p>本文没有将BSEKF与使用蒙特卡罗技术的粒子滤波（PF）方法进行比较。理论上，粒子滤波器能够计算出比BSEKF或任何竞争的非线性滤波器更好的估计，但由于在状态空间中选择相关点的差异，它对具有挑战性的问题有很大的计算代价。BSEKF在精神上更类似于EKF、IEKF和UKF，因为每个算法都是一种使用有界计算数的近似方法。将这种方法与在无限次计算的极限下精确的方法进行比较似乎没有什么意义。另一方面，对于极端非线性问题，一个有用的方法可能是将BSEKF和PF技术技术结合起来。前者可用于指导粒子（状态空间中的点）的选择，以有效地实现后者。
本文的其余部分分为三个主要部分，以及一些结论。在第二部分，非线性离散时间滤波问题被定义为一个地图估计问题，以及EKF、IEKF和UKF如何使用近似来解决它的各个方面谈论。本文描述了BSEKF如何比任何其他任何过滤器更少地逼近MAP问题，并详细描述了如何实现该算法。
在摘要给出了一个同时进行参数计算的姿态估计问题。IV部分是BSEKF、EKF和UKF滤波结果。本文的结论在V.部分</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://www.lling.online">汐汐</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.lling.online/2024/05/18/%E8%AE%BA%E6%96%87-Review-of-Factor-Graphs-for-Robust-GNSS/">https://www.lling.online/2024/05/18/%E8%AE%BA%E6%96%87-Review-of-Factor-Graphs-for-Robust-GNSS/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.lling.online" target="_blank">汐汐的成长之路</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%9B%A0%E5%AD%90%E5%9B%BE/">因子图</a><a class="post-meta__tags" href="/tags/%E7%BB%BC%E8%BF%B0/">综述</a><a class="post-meta__tags" href="/tags/%E9%B2%81%E6%A3%92%E6%80%A7/">鲁棒性</a></div><div class="post_share"><div class="social-share" data-image="/img/top-img/paper%20reading.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/05/20/C-Calculation-of-unsigned-numbers/" title="C++ 学习  关于无符号数的计算"><img class="cover" src="/img/top-img/C++.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">C++ 学习  关于无符号数的计算</div></div></a></div><div class="next-post pull-right"><a href="/2024/05/12/%E8%AE%BA%E6%96%87%E2%80%94%E2%80%94SAM/" title="论文粗略阅读——Sqare Root SAM"><img class="cover" src="/img/top-img/paper%20reading.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">论文粗略阅读——Sqare Root SAM</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/05/04/%E5%9B%A0%E5%AD%90%E5%9B%BE%E4%BC%98%E5%8C%96%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/" title="因子图优化相关问题"><img class="cover" src="/img/top-img/001%20FGO%20question.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-04</div><div class="title">因子图优化相关问题</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/miao.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">汐汐</div><div class="author-info__description">总有一些坚持，能从一寸冰封的土壤里培育出十万朵怒放的蔷薇❀❀</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://blog.csdn.net/qq_53131867?type=blog"><i class="fab custom csdn"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xi-song" target="_blank" title="GitHub"><i class="iconfont icon-GitHub" style="color: #24292e;"></i></a><a class="social-icon" href="/%5Cimg%5Cali.jpg" target="_blank" title="Wechat"><i class="iconfont icon-weixin" style="color: #28c445;"></i></a><a class="social-icon" href="https://blog.csdn.net/qq_53131867?type=blog" target="_blank" title="CSDN"><i class="iconfont icon-csdn" style="color: #dd1700;"></i></a><a class="social-icon" href="https://www.zhihu.com/people/shui-meng-tong-hua" target="_blank" title="Zhihu"><i class="iconfont icon-zhihu" style="color: #0066ff;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到汐汐的知识小窝，不定期分享导航定位，编程，科研相关知识，欢迎关注收藏噢~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#review-of-factor-graphs-for-robust-gnss"><span class="toc-number">1.</span> <span class="toc-text">Review of Factor Graphs
for Robust GNSS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%9B%A0%E5%AD%90%E5%9B%BE"><span class="toc-number">1.1.</span> <span class="toc-text">什么是因子图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9B%A0%E5%AD%90%E5%9B%BE%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8A%BF"><span class="toc-number">1.2.</span> <span class="toc-text">使用因子图有什么优势</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%A0%E5%AD%90%E5%9B%BE%E5%A6%82%E4%BD%95%E8%BF%90%E7%94%A8%E4%BA%8Egnss"><span class="toc-number">1.3.</span> <span class="toc-text">因子图如何运用于GNSS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8gnss%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%9B%A0%E5%AD%90%E5%9B%BE%E8%BF%9B%E8%A1%8C%E9%B2%81%E6%A3%92%E4%BC%B0%E8%AE%A1%E7%9A%84%E6%96%B9%E6%B3%95%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.4.</span> <span class="toc-text">在GNSS中使用因子图进行鲁棒估计的方法是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%A0%E5%AD%90%E5%9B%BE%E5%AF%B9gnss%E5%92%8C%E6%97%A0%E7%BA%BF%E7%94%B5%E5%AF%BC%E8%88%AA%E7%A4%BE%E5%8C%BA%E7%9A%84%E6%BD%9C%E5%9C%A8%E7%94%A8%E9%80%94%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.5.</span> <span class="toc-text">因子图对GNSS和无线电导航社区的潜在用途是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98"><span class="toc-number">1.6.</span> <span class="toc-text">其他相关问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E6%9C%AC%E6%96%87%E6%8F%90%E5%87%BA%E7%9A%84%E5%8F%8D%E5%90%91%E5%B9%B3%E6%BB%91ekf-9"><span class="toc-number">1.6.1.</span> <span class="toc-text">关于本文提出的反向平滑EKF [9]</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/03/17/stm32_debug/" title="【stm32 bug那些事儿】"><img src="/img/top-img/stm32.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【stm32 bug那些事儿】"/></a><div class="content"><a class="title" href="/2025/03/17/stm32_debug/" title="【stm32 bug那些事儿】">【stm32 bug那些事儿】</a><time datetime="2025-03-17T12:02:16.000Z" title="发表于 2025-03-17 20:02:16">2025-03-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/16/STM32-SPI%E9%80%9A%E4%BF%A1/" title="【STM32学习】SPI通信"><img src="/img/top-img/stm32.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【STM32学习】SPI通信"/></a><div class="content"><a class="title" href="/2025/03/16/STM32-SPI%E9%80%9A%E4%BF%A1/" title="【STM32学习】SPI通信">【STM32学习】SPI通信</a><time datetime="2025-03-16T11:41:00.000Z" title="发表于 2025-03-16 19:41:00">2025-03-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/22/debug/" title="关于OB-GINS在VScode调试配置设置"><img src="/img/top-img/C++.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="关于OB-GINS在VScode调试配置设置"/></a><div class="content"><a class="title" href="/2024/10/22/debug/" title="关于OB-GINS在VScode调试配置设置">关于OB-GINS在VScode调试配置设置</a><time datetime="2024-10-22T03:12:29.000Z" title="发表于 2024-10-22 11:12:29">2024-10-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/06/C_C++%E9%9B%B6%E7%A2%8E%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%B0%E5%BD%95/" title="C/C++零碎知识点记录"><img src="/img/top-img/C++.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C/C++零碎知识点记录"/></a><div class="content"><a class="title" href="/2024/10/06/C_C++%E9%9B%B6%E7%A2%8E%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%B0%E5%BD%95/" title="C/C++零碎知识点记录">C/C++零碎知识点记录</a><time datetime="2024-10-06T08:45:29.000Z" title="发表于 2024-10-06 16:45:29">2024-10-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/06/%E6%AD%A6%E6%B1%89%E5%A4%A7%E5%AD%A6OB-Gins%20%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%9A%84%E8%AE%B0%E5%BD%95/" title="武汉大学OB-Gins 环境配置的记录"><img src="/img/top-img/FGO_code.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="武汉大学OB-Gins 环境配置的记录"/></a><div class="content"><a class="title" href="/2024/09/06/%E6%AD%A6%E6%B1%89%E5%A4%A7%E5%AD%A6OB-Gins%20%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%9A%84%E8%AE%B0%E5%BD%95/" title="武汉大学OB-Gins 环境配置的记录">武汉大学OB-Gins 环境配置的记录</a><time datetime="2024-09-06T12:33:55.000Z" title="发表于 2024-09-06 20:33:55">2024-09-06</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By 汐汐</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi，welocme to my blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const initGitalk = () => {
    const gitalk = new Gitalk(Object.assign({
      clientID: 'Ov23lilBvAg6ryz910Bq',
      clientSecret: '35f8ef4fa5095c847021e15ea2be9f3c413e55b8',
      repo: 'xi-song.github.io',
      owner: 'xi-song',
      admin: ['xi-song'],
      id: 'd578c9fb85ad1de3982f6b8e9462c026',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async() => {
    if (typeof Gitalk === 'function') initGitalk()
    else {
      await getCSS('https://cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.css')
      await getScript('https://cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.js')
      initGitalk()
    }
  }
  
  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  if ('Gitalk' === 'Gitalk' || !true) {
    if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script></div><script src="/styles/fish.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>